import{i as C,j as f,r as i,D as w,o as _,c as V,b as e,e as s,s as v,t as g,d as z,m as B,a3 as D,$ as I}from"./index-tQCl1PAq.js";import{a as $}from"./agents.servise-DddxFh8v.js";import{c as N,d as T,V as j}from"./VCard-Ds9TbtrS.js";import{V as A,a as L}from"./VDataTableVirtual-DNj0ROkD.js";import{V as P}from"./filter-Cbdyj8Yi.js";import"./axios-DDd5p76N.js";import"./VAvatar-9D-c_Kgc.js";import"./VImg-CJiBNf-Q.js";import"./VChip-ujGnIvdd.js";import"./VDivider-DlEJllXT.js";import"./VList-DyuFgNlp.js";const S=["onClick"],U={__name:"clientTable",setup(y){const m=C(),d=f(),l=Number(m.params.id),n=i(!1),c=i(1),o=i({page:1,size:50}),h=i([{title:"Id",align:"start",key:"index",sortable:!1},{title:"Mijoz F.I.SH",align:"start",key:"full_name"},{title:"Kechiktirilgan daromad",align:"start",key:"overdue_income"},{title:"Foiz daromadi",align:"start",key:"percentage_income"},{title:"Jarima daromadi",align:"start",key:"surcharge_income"},{title:"Umumiy daromad",align:"start",key:"total_income"}]),p=i([]),u=async()=>{n.value=!0;try{const a=await $(l,o.value);p.value=a.items,c.value=a.pages||1}catch(a){console.error("Xatolik:",a)}finally{n.value=!1}};async function x(a){await d.push({path:`/clients/${a}`,param:{id:a}})}const k=()=>{o.value.page=1,u()},b=()=>{u()};return w(async()=>{await u()}),(a,r)=>(_(),V("section",null,[e(j,null,{default:s(()=>[e(N,null,{default:s(()=>[e(A,{headers:h.value,items:p.value,loading:n.value,"fixed-header":"",height:"65vh","hide-default-footer":"","loading-text":"ma'lumotlar yuklanmoqda","no-data-text":"ma'lumot topilmadi"},{"item.index":s(({index:t})=>[v(g(t+1),1)]),"item.full_name":s(({item:t})=>[z("span",{class:"text-primary cursor-pointer",onClick:q=>x(t.client_id)},g(t.full_name),9,S)]),_:1},8,["headers","items","loading"]),e(T,{class:"w-full d-flex justify-space-between mt-2"},{default:s(()=>[e(P,{modelValue:o.value.size,"onUpdate:modelValue":[r[0]||(r[0]=t=>o.value.size=t),k],items:[10,20,50],label:"Har bir sahifa","max-width":"150"},null,8,["modelValue"]),e(L,{modelValue:o.value.page,"onUpdate:modelValue":[r[1]||(r[1]=t=>o.value.page=t),b],length:c.value,"total-visible":4,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]))}},W={__name:"[id]",setup(y){const m=f();return(d,l)=>(_(),V("section",null,[e(D,{class:"mb-4",variant:"text",onClick:l[0]||(l[0]=n=>B(m).push("/agents"))},{default:s(()=>[e(I,{color:"primary",icon:"mdi-arrow-left-bottom",size:"20"}),l[1]||(l[1]=v(" Agent ma'lumotlariga qaytish "))]),_:1}),e(U,{class:"mb-4"})]))}};export{W as default};
