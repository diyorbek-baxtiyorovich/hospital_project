import{X as N,r as q,aH as j,D as B,c as K,b as s,e as t,o as T,d as o,s as i,t as d,m as n,a2 as U,aF as m,a3 as I}from"./index-CiDOeLWu.js";import{u as J}from"./userService-C2ZXMQ8d.js";import{V as C,c as D,d as M}from"./VCard-n0D_yEal.js";import{V as A}from"./VForm-qgHvHQIG.js";import{V as H,a as p}from"./VRow-D_iISvjp.js";import"./VAvatar-D4RwvDF8.js";import"./VImg-B3pZFRRB.js";const O={class:"container"},X={class:"mb-2"},E={class:"mb-2"},P={class:"mb-2"},R={class:"mb-2"},ea={__name:"index",setup(Y){const u=N(()=>{const r=localStorage.getItem("user_data");return r?JSON.parse(r):null}),l=q({username:null,current_password:null,new_password:null}),f=j(),c=q(null);async function F(){const{valid:r}=await c.value.validate();if(!r)return;const e={username:l.value.username.trim(),current_password:l.value.current_password.trim(),new_password:l.value.new_password.trim(),user_id:l.value.id};(await J(e)).status===200?(f.success("Muvofaqqiyatli yangilandi."),createDialog.value=!1):f.error("Kiritilgan parol to'g'ri kelmadi yoki hozirgi parol xato kiritildi!")}return B(()=>{const r=localStorage.getItem("user_data");r&&(l.value=JSON.parse(r).data)}),(r,e)=>(T(),K("div",O,[s(C,{class:"mb-6 text-xl",title:"Asosiy ma'lumotlar"},{default:t(()=>[s(D,null,{default:t(()=>{var a,_,b,w,v,V,g,y,x,h,S,z,k;return[o("div",X,[e[3]||(e[3]=o("span",{class:"font-weight-bold"},"Xodim F.I.Sh: ",-1)),i(" "+d((_=(a=n(u))==null?void 0:a.data)==null?void 0:_.full_name),1)]),o("div",E,[e[4]||(e[4]=o("span",{class:"font-weight-bold"},"Foydalanuvchi nomi: ",-1)),i(" "+d((w=(b=n(u))==null?void 0:b.data)==null?void 0:w.username),1)]),o("div",P,[e[5]||(e[5]=o("span",{class:"font-weight-bold"},"Struktura: ",-1)),i(" "+d((g=(V=(v=n(u))==null?void 0:v.data)==null?void 0:V.department)==null?void 0:g.name),1)]),o("div",R,[e[6]||(e[6]=o("span",{class:"font-weight-bold"},"Joylashuv: ",-1)),i(" "+d((h=(x=(y=n(u))==null?void 0:y.data)==null?void 0:x.region)==null?void 0:h.name_uz)+" , "+d((k=(z=(S=n(u))==null?void 0:S.data)==null?void 0:z.local_code)==null?void 0:k.name_uz),1)])]}),_:1})]),_:1}),s(C,{class:"mb-6 text-xl",title:"Sozlamalar"},{default:t(()=>[s(A,{ref_key:"form",ref:c,onSubmit:U(F,["prevent"])},{default:t(()=>[s(D,null,{default:t(()=>[s(H,null,{default:t(()=>[s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.username=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Username",required:""},null,8,["modelValue","rules"])]),_:1}),s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.current_password,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.current_password=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Hozirgi parol",required:""},null,8,["modelValue","rules"])]),_:1}),s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.new_password,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.new_password=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Yangi parol",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),s(M,{class:"justify-end mx-4"},{default:t(()=>[s(I,{color:"success",type:"submit",variant:"elevated"},{default:t(()=>e[7]||(e[7]=[i(" saqlash ")])),_:1})]),_:1})]),_:1},512)]),_:1})]))}};export{ea as default};
