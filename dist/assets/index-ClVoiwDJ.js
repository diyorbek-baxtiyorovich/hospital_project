import{X as j,r as q,ar as B,D as F,c as K,b as s,e as t,o as T,d as o,s as i,t as d,m as n,a2 as U,as as m,a3 as I}from"./index-BI3cAwc5.js";import{u as J}from"./userService-sIT6ugDE.js";import{V as C,c as D,d as M}from"./VCard-Dy_fW5FT.js";import{V as A}from"./VForm-D7ejy7R_.js";import{V as O,a as p}from"./VRow-Cs-TkuQA.js";import"./axios-sOV5ytsM.js";import"./VAvatar-CY4qMHfX.js";import"./VImg-ojEEosCI.js";const X={class:"container"},E={class:"mb-2"},H={class:"mb-2"},P={class:"mb-2"},R={class:"mb-2"},sa={__name:"index",setup(Y){const u=j(()=>{const r=localStorage.getItem("user_data");return r?JSON.parse(r):null}),l=q({username:null,current_password:null,new_password:null}),f=B(),c=q(null);async function N(){const{valid:r}=await c.value.validate();if(!r)return;const e={username:l.value.username.trim(),current_password:l.value.current_password.trim(),new_password:l.value.new_password.trim(),user_id:l.value.id};(await J(e)).status===200?(f.success("Muvofaqqiyatli yangilandi."),createDialog.value=!1):f.error("Kiritilgan parol to'g'ri kelmadi yoki hozirgi parol xato kiritildi!")}return F(()=>{const r=localStorage.getItem("user_data");r&&(l.value=JSON.parse(r).data)}),(r,e)=>(T(),K("div",X,[s(C,{class:"mb-6 text-xl",title:"Asosiy ma'lumotlar"},{default:t(()=>[s(D,null,{default:t(()=>{var a,_,b,w,v,V,g,y,x,h,S,z,k;return[o("div",E,[e[3]||(e[3]=o("span",{class:"font-weight-bold"},"Xodim F.I.Sh: ",-1)),i(" "+d((_=(a=n(u))==null?void 0:a.data)==null?void 0:_.full_name),1)]),o("div",H,[e[4]||(e[4]=o("span",{class:"font-weight-bold"},"Foydalanuvchi nomi: ",-1)),i(" "+d((w=(b=n(u))==null?void 0:b.data)==null?void 0:w.username),1)]),o("div",P,[e[5]||(e[5]=o("span",{class:"font-weight-bold"},"Struktura: ",-1)),i(" "+d((g=(V=(v=n(u))==null?void 0:v.data)==null?void 0:V.department)==null?void 0:g.name),1)]),o("div",R,[e[6]||(e[6]=o("span",{class:"font-weight-bold"},"Joylashuv: ",-1)),i(" "+d((h=(x=(y=n(u))==null?void 0:y.data)==null?void 0:x.region)==null?void 0:h.name_uz)+" , "+d((k=(z=(S=n(u))==null?void 0:S.data)==null?void 0:z.local_code)==null?void 0:k.name_uz),1)])]}),_:1})]),_:1}),s(C,{class:"mb-6 text-xl",title:"Sozlamalar"},{default:t(()=>[s(A,{ref_key:"form",ref:c,onSubmit:U(N,["prevent"])},{default:t(()=>[s(D,null,{default:t(()=>[s(O,null,{default:t(()=>[s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.username=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Username",required:""},null,8,["modelValue","rules"])]),_:1}),s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.current_password,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.current_password=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Hozirgi parol",required:""},null,8,["modelValue","rules"])]),_:1}),s(p,{cols:"12",md:"4"},{default:t(()=>[s(m,{modelValue:l.value.new_password,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.new_password=a),rules:[a=>!!a||"to'ldirish majburiy!",a=>a&&a.length>=3||"Kamida 3 belgidan iborat bo'lishi zarur"],label:"Yangi parol",required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),s(M,{class:"justify-end mx-4"},{default:t(()=>[s(I,{color:"success",type:"submit",variant:"elevated"},{default:t(()=>e[7]||(e[7]=[i(" saqlash ")])),_:1})]),_:1})]),_:1},512)]),_:1})]))}};export{sa as default};
