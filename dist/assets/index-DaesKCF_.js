import{aq as x,ar as h,w as k,D as C,f as u,e as l,o as m,b as i,s as d,m as s,as as P,d as b,t as w,x as p,j as L}from"./index-DxNeeIVj.js";import{g as S}from"./clientService-Ct4O9O4z.js";import{V as T,b as v,d as q,c as z}from"./VCard-59B2rNwt.js";import{a as g,V as N}from"./VRow-DGL5KTdU.js";import{V as j}from"./VAutocomplete-sKTYEv_g.js";import{V as I,a as B}from"./VDataTableVirtual-ZEedvcPT.js";import{V as c}from"./VChip-BAZoT04A.js";import{V as D}from"./filter-CSn0Abjy.js";import"./axios-Rb6iws29.js";import"./VAvatar-BmIqYR8o.js";import"./VImg-BIWL0GR_.js";import"./VList-B5ImuCm_.js";import"./VDivider-BG2a6mMv.js";const M=x("client",{state:()=>({headers:[{title:"Id",align:"start",key:"id",sortable:!1},{title:"Mijoz F.I.SH",align:"start",key:"full_name"},{title:"INN / Passport",align:"start",key:"inn_passport"},{title:"Kredit id",align:"start",key:"loan_id"},{title:"Status",align:"start",key:"client_status"}],pageParams:{page:1,size:50,client_status:null,query:null},pageLength:1,clientList:[],loading:!1,statusList:[{title:"Yakunlangan",value:"completed"},{title:"Jarayonda",value:"in_progress"},{title:"Yakunlanmagan",value:"not_completed"}]}),actions:{async fetchClientList(){this.loading=!0;try{const o=await S(this.pageParams);this.pageLength=(o==null?void 0:o.pages)||1,this.clientList=o==null?void 0:o.items}catch(o){return o}finally{this.loading=!1}}}}),U=["onClick"],Z={__name:"index",setup(o){const V=L();h();const a=M();async function n(){await a.fetchClientList()}function y(){a.pageParams.page=1,n()}async function _(r){await V.push({path:`/clients/${r}`,param:{id:r}})}let f=null;return k(()=>a.pageParams.query,(r,e)=>{clearTimeout(f),f=setTimeout(()=>{a.pageParams.page=1,n()},600)}),C(()=>{n()}),(r,e)=>(m(),u(T,null,{default:l(()=>[i(N,{class:"ma-2"},{default:l(()=>[i(g,{cols:"12",md:"4"},{default:l(()=>[i(v,{class:"d-flex align-center pe-2"},{default:l(()=>e[4]||(e[4]=[d(" Mijozlar ro'yxati ")])),_:1})]),_:1}),i(g,{class:"d-flex",cols:"12",md:"4"},{default:l(()=>[i(j,{modelValue:s(a).pageParams.client_status,"onUpdate:modelValue":[e[0]||(e[0]=t=>s(a).pageParams.client_status=t),n],items:s(a).statusList,clearable:"","item-title":"title","item-value":"value",label:"Status"},null,8,["modelValue","items"])]),_:1}),i(g,{class:"d-flex",cols:"12",md:"4"},{default:l(()=>[i(P,{modelValue:s(a).pageParams.query,"onUpdate:modelValue":e[1]||(e[1]=t=>s(a).pageParams.query=t),clearable:"",density:"compact","hide-details":"",label:"Mijoz F.I.SH","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"])]),_:1})]),_:1}),i(z,null,{default:l(()=>[i(I,{headers:s(a).headers,items:s(a).clientList,loading:s(a).loading,"fixed-header":"",height:"65vh","hide-default-footer":"","loading-text":"ma'lumotlar yuklanmoqda","no-data-text":"ma'lumot topilmadi"},{"item.full_name":l(({item:t})=>[b("span",{class:"text-primary cursor-pointer",onClick:Y=>_(t.id)},w(t.full_name),9,U)]),"item.client_status":l(({item:t})=>[t.client_status==="not_completed"?(m(),u(c,{key:0,class:"ma-0",color:"error",small:""},{default:l(()=>e[5]||(e[5]=[d(" Yakunlanmagan ")])),_:1})):p("",!0),t.client_status==="completed"?(m(),u(c,{key:1,class:"ma-0",color:"success",small:""},{default:l(()=>e[6]||(e[6]=[d(" Yakunlangan ")])),_:1})):p("",!0),t.client_status==="in_progress"?(m(),u(c,{key:2,class:"ma-0",color:"warning",small:""},{default:l(()=>e[7]||(e[7]=[d(" Jarayonda ")])),_:1})):p("",!0)]),_:1},8,["headers","items","loading"]),i(q,{class:"w-full d-flex justify-space-between mt-2"},{default:l(()=>[i(D,{modelValue:s(a).pageParams.size,"onUpdate:modelValue":[e[2]||(e[2]=t=>s(a).pageParams.size=t),y],items:[10,20,50],label:"Har bir sahifa","max-width":"150"},null,8,["modelValue"]),i(B,{modelValue:s(a).pageParams.page,"onUpdate:modelValue":[e[3]||(e[3]=t=>s(a).pageParams.page=t),n],length:s(a).pageLength,"total-visible":4,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}};export{Z as default};
