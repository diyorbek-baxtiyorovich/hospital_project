import{aq as $,X as h,aY as b,aZ as B,o as v,c as T,m as f,f as S,a_ as z,x as A,b as a,a$ as D,h as F,e as t,y as N,b0 as k,b1 as x,as as P,v as R,ar as j,r as n,d as w,a2 as q,a3 as M,s as X,j as E}from"./index-DxNeeIVj.js";import{u as y,a as K,b as O}from"./misc-mask-light-D7Rtm31J.js";import{a as U}from"./axios-Rb6iws29.js";import{V as Y,c as _}from"./VCard-59B2rNwt.js";import{V as G}from"./VImg-BIWL0GR_.js";import{V as H}from"./VForm-C7GbC5wb.js";import{V as I,a as V}from"./VRow-DGL5KTdU.js";import"./VAvatar-BmIqYR8o.js";const J="/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",Z="/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",Q="/assets/auth-v2-login-illustration-dark-ClExSVqL.png",W="/assets/auth-v2-login-illustration-light-C4sKfRS1.png";async function ee(i){try{const{data:s}=await U.post("/v1/auth/login",i);return s}catch{}}const ae=$("user",{state:()=>({user:null,loading:!1}),actions:{async login(i){try{return await ee(i)}catch(s){console.log(s)}}}}),L=Object.assign({name:"AppTextField",inheritAttrs:!1},{__name:"AppTextField",setup(i){const s=h(()=>{const l=b().id,d=B();return l?`app-text-field-${l}`:d}),u=h(()=>b().label);return(r,l)=>(v(),T("div",{class:R(["app-text-field flex-grow-1",r.$attrs.class])},[f(u)?(v(),S(z,{key:0,for:f(s),class:"mb-1 text-body-2 text-wrap",style:{"line-height":"15px"},text:f(u)},null,8,["for","text"])):A("",!0),a(P,k(x({...r.$attrs,class:null,label:void 0,variant:"outlined",id:f(s)})),D({_:2},[F(r.$slots,(d,c)=>({name:c,fn:t(o=>[N(r.$slots,c,k(x(o||{})))])}))]),1040)],2))}}),de={__name:"login",setup(i){const s=j(),u=E(),r=ae(),l=n(!1),d=n("");n(!1);const c=n(""),o=n({username:c.value,password:d.value}),C=async()=>{var g;try{if(l.value=!0,o.value.username===""||o.value.password==="")return;const e=await r.login(o.value);e!=null&&e.token?(s.success(`Xush kelibsiz  ${(g=e.data)==null?void 0:g.full_name}`),localStorage.setItem("access_token",e.token),localStorage.setItem("user_data",JSON.stringify(e)),await u.push("/"),location.reload()):s.error("Login yoki parol noto'g'ri kiritildi!"),l.value=!1}catch{l.value=!1}finally{l.value=!1}},m=n(!1);return y(W,Q,Z,J,!0),y(O,K),(g,e)=>(v(),S(I,{class:"auth-wrapper bg-surface","no-gutters":""},{default:t(()=>[a(V,{class:"auth-card-v2 d-flex align-center justify-center",cols:"12",md:"12"},{default:t(()=>[a(Y,{"max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:t(()=>[a(_,{class:"text-center"},{default:t(()=>[a(G,{width:350,src:"/logo_mkb.svg"}),e[3]||(e[3]=w("h4",{class:"text-h4 mb-1 mt-4"}," Xush kelibsiz! ",-1)),e[4]||(e[4]=w("p",{class:"mb-0"}," Iltimos tizimga kirish uchun ma'lumotlaringizni kiriting. ",-1))]),_:1}),a(_,null,{default:t(()=>[a(H,{onSubmit:q(C,["prevent"])},{default:t(()=>[a(I,null,{default:t(()=>[a(V,{cols:"12"},{default:t(()=>[a(L,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=p=>o.value.username=p),autofocus:"",label:"Foydalanuvchi nomi (username)",placeholder:"user"},null,8,["modelValue"])]),_:1}),a(V,{cols:"12"},{default:t(()=>[a(L,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=p=>o.value.password=p),"append-inner-icon":m.value?"tabler-eye-off":"tabler-eye",type:m.value?"text":"password",autocomplete:"password",label:"Parol",placeholder:"············","onClick:appendInner":e[2]||(e[2]=p=>m.value=!m.value)},null,8,["modelValue","append-inner-icon","type"]),a(M,{loading:l.value,block:"",class:"mt-4",type:"submit"},{default:t(()=>e[5]||(e[5]=[X(" Kirish ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{de as default};
