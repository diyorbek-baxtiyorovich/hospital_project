import{aD as T,X as h,b1 as w,b2 as j,o as y,c as A,m,f as I,b3 as B,x as N,b as t,b4 as F,h as P,e as a,y as R,aX as _,aY as V,aW as D,v as L,a_ as O,r as f,d as i,$ as c,a2 as k,a3 as U,s as X,j as E}from"./index-B_oSWYrq.js";import{a as J}from"./axios-N4JvVCu6.js";import{l as M}from"./logos-CQ9irULE.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as u,V as $}from"./VRow-CzOa9ATY.js";import{V as Y,c as z}from"./VCard-ieIYkKM8.js";import{V as q}from"./VImg-DF32ofzA.js";import{V as G}from"./VForm-DA9WJtpH.js";import{V as H}from"./VCheckbox-ChYKPv3a.js";import"./VAvatar-Bw1abjYH.js";import"./VCheckboxBtn-9dQfnW4S.js";async function K(p){try{const{data:s}=await J.post("/auth/login",p);return s}catch{}}const Q=T("user",{state:()=>({user:null,loading:!1}),actions:{async login(p){try{return await K(p)}catch(s){console.log(s)}}}}),C=Object.assign({name:"AppTextField",inheritAttrs:!1},{__name:"AppTextField",setup(p){const s=h(()=>{const l=w().id,b=j();return l?`app-text-field-${l}`:b}),x=h(()=>w().label);return(n,l)=>(y(),A("div",{class:L(["app-text-field flex-grow-1",n.$attrs.class])},[m(x)?(y(),I(B,{key:0,for:m(s),class:"mb-1 text-body-2 text-wrap",style:{"line-height":"15px"},text:m(x)},null,8,["for","text"])):N("",!0),t(D,_(V({...n.$attrs,class:null,label:void 0,variant:"outlined",id:m(s)})),F({_:2},[P(n.$slots,(b,g)=>({name:g,fn:a(d=>[R(n.$slots,g,_(V(d||{})))])}))]),1040)],2))}}),Z={class:"illustration-wrapper"},ee={class:"medical-icon-grid"},te={class:"mb-6 d-flex justify-center",style:{width:"100%",height:"150px"}},ae={__name:"login",setup(p){const s=O(),x=E(),n=Q(),l=f(!1),b=f(""),g=f(""),d=f(!1),r=f({username:g.value,password:b.value}),S=async()=>{var v;try{if(l.value=!0,r.value.username===""||r.value.password===""){s.error("Пожалуйста, заполните все поля");return}const e=await n.login(r.value);e!=null&&e.token?(s.success(`Добро пожаловать, ${(v=e.data)==null?void 0:v.full_name}`),localStorage.setItem("access_token",e.token),localStorage.setItem("user_data",JSON.stringify(e)),await x.push("/"),location.reload()):s.error("Неверное имя пользователя или пароль!"),l.value=!1}catch{s.error("Произошла ошибка. Пожалуйста, попробуйте снова"),l.value=!1}finally{l.value=!1}};return(v,e)=>(y(),I($,{class:"auth-wrapper","no-gutters":""},{default:a(()=>[t(u,{cols:"12",lg:"7",class:"d-none d-lg-flex align-center justify-center position-relative medical-illustration-section"},{default:a(()=>[i("div",Z,[i("div",ee,[t(c,{icon:"mdi-stethoscope",size:"48",class:"medical-icon icon-1"}),t(c,{icon:"mdi-heart-pulse",size:"48",class:"medical-icon icon-2"}),t(c,{icon:"mdi-medical-bag",size:"48",class:"medical-icon icon-3"}),t(c,{icon:"mdi-hospital-building",size:"48",class:"medical-icon icon-4"}),t(c,{icon:"mdi-chart-line",size:"48",class:"medical-icon icon-5"}),t(c,{icon:"mdi-clipboard-pulse",size:"48",class:"medical-icon icon-6"})]),e[4]||(e[4]=i("div",{class:"text-center illustration-content"},[i("h2",{class:"text-h3 font-weight-bold mb-4 text-white"}," Панель управления врачами "),i("p",{class:"text-h6 text-white opacity-90"}," Управляйте информацией о пациентах и следите за их состоянием ")],-1))])]),_:1}),t(u,{cols:"12",lg:"5",class:"d-flex align-center justify-center bg-surface"},{default:a(()=>[t(Y,{flat:"",class:"pa-8 pa-sm-12 auth-card","max-width":"500",width:"100%"},{default:a(()=>[t(z,{class:"text-center pa-0 mb-8"},{default:a(()=>[i("div",te,[t(q,{width:200,src:m(M)},null,8,["src"])]),e[5]||(e[5]=i("h3",{class:"text-h4 font-weight-bold mb-2 text-primary"}," Вход в систему ",-1)),e[6]||(e[6]=i("p",{class:"text-body-1 text-medium-emphasis"}," Добро пожаловать в административную панель врачей ",-1))]),_:1}),t(z,{class:"pa-0"},{default:a(()=>[t(G,{onSubmit:k(S,["prevent"])},{default:a(()=>[t($,null,{default:a(()=>[t(u,{cols:"12"},{default:a(()=>[t(C,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.value.username=o),autofocus:"",label:"Имя пользователя",placeholder:"Введите имя пользователя","prepend-inner-icon":"mdi-account-outline",variant:"outlined",density:"comfortable",rules:[o=>!!o||"Имя пользователя обязательно"]},null,8,["modelValue","rules"])]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(C,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value.password=o),type:d.value?"text":"password","append-inner-icon":d.value?"mdi-eye-off-outline":"mdi-eye-outline","prepend-inner-icon":"mdi-lock-outline",label:"Пароль",placeholder:"Введите пароль",variant:"outlined",density:"comfortable",autocomplete:"current-password",rules:[o=>!!o||"Пароль обязателен"],"onClick:appendInner":e[2]||(e[2]=o=>d.value=!d.value)},null,8,["modelValue","type","append-inner-icon","rules"])]),_:1}),t(u,{cols:"12",class:"d-flex align-center justify-space-between mb-2"},{default:a(()=>[t(H,{label:"Запомнить меня",density:"compact","hide-details":""}),i("a",{href:"#",class:"text-primary text-decoration-none text-body-2",onClick:e[3]||(e[3]=k(o=>m(s).info("Обратитесь к администратору"),["prevent"]))}," Забыли пароль? ")]),_:1}),t(u,{cols:"12"},{default:a(()=>[t(U,{block:"",size:"large",type:"submit",loading:l.value,class:"mb-4 text-capitalize",color:"primary",elevation:"0"},{default:a(()=>[t(c,{start:"",icon:"mdi-login"}),e[7]||(e[7]=X(" Войти в систему "))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},fe=W(ae,[["__scopeId","data-v-2032d6ed"]]);export{fe as default};
